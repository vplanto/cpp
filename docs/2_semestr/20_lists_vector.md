# –õ–µ–∫—Ü—ñ—è 20: –õ—ñ–Ω—ñ–π–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ ‚Äî –ë–∏—Ç–≤–∞ Vector vs List

[‚Üê –õ–µ–∫—Ü—ñ—è 19](19_complexity_profiling.md) | [Index](index.md) | [–î–∞–ª—ñ: –õ–µ–∫—Ü—ñ—è 21 ‚Üí](21_sorting_algorithms.md)



## –ú–µ—Ç–∞
–ó—Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Å–ø–∏—Å–∫–∏ "–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º". –ù–∞–≤—á–∏—Ç–∏—Å—è –æ–±–∏—Ä–∞—Ç–∏ –º—ñ–∂ –º–∞—Å–∏–≤–æ–º (`std::vector`) —Ç–∞ –∑–≤'—è–∑–Ω–∏–º —Å–ø–∏—Å–∫–æ–º (`std::list`).
–°–ø–æ–π–ª–µ—Ä: –£ 95% –≤–∏–ø–∞–¥–∫—ñ–≤ –≤–∏ –º–∞—î—Ç–µ –±—Ä–∞—Ç–∏ Vector.

## –ï–∫—Å–ø—Ä–µ—Å-–æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è
1.  –Ø–∫—â–æ –º–∏ –¥–æ–¥–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç —É **—Å–µ—Ä–µ–¥–∏–Ω—É** –º–∞—Å–∏–≤—É, —â–æ —Å—Ç–∞—î—Ç—å—Å—è –∑ —ñ–Ω—à–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏?
2.  –ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Å—É–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –≤ —Å–µ—Ä–µ–¥–∏–Ω—É –∑–≤'—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É?
3.  –°–∫—ñ–ª—å–∫–∏ –ø–∞–º'—è—Ç—ñ (–±–∞–π—Ç) –∑–∞–π–º–∞—î –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ `int` (4 –±–∞–π—Ç–∏) —É –¥–≤–æ–∑–≤'—è–∑–Ω–æ–º—É —Å–ø–∏—Å–∫—É –Ω–∞ 64-–±—ñ—Ç–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ?

<details markdown="1">
<summary>–Ü–Ω–∂–µ–Ω–µ—Ä–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å</summary>

1.  –ú–∏ –º—É—Å–∏–º–æ **–∑—Å—É–Ω—É—Ç–∏** (—Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏) –≤—Å—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤–ø—Ä–∞–≤–æ. –¶–µ –ø–æ–≤—ñ–ª—å–Ω–æ $O(N)$.
2.  **–ù—ñ.** –ú–∏ –ø—Ä–æ—Å—Ç–æ –∑–º—ñ–Ω—é—î–º–æ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∏ —É —Å—É—Å—ñ–¥—ñ–≤. –¶–µ —à–≤–∏–¥–∫–æ $O(1)$.
3.  **24 –±–∞–π—Ç–∏!** (4 –±–∞–π—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è + 4 padding + 8 –≤–∫–∞–∑—ñ–≤–Ω–∏–∫ `next` + 8 –≤–∫–∞–∑—ñ–≤–Ω–∏–∫ `prev`). –û–≤–µ—Ä—Ö–µ–¥ —É 5 —Ä–∞–∑—ñ–≤!

</details>

---

## –ß–∞—Å—Ç–∏–Ω–∞ 1: –ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—è "–°–ø–∏—Å–æ–∫" (ADT)

[cite_start][cite: 4]
–°–ø–∏—Å–æ–∫ ‚Äî —Ü–µ —É–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω–∞ –∫–æ–ª–µ–∫—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤. –ú–∏ —Ö–æ—á–µ–º–æ —Ä–æ–±–∏—Ç–∏:
* `insert(pos, value)`
* `remove(pos)`
* `get(index)`

–ê–ª–µ **—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è** –¥–∏–∫—Ç—É—î —à–≤–∏–¥–∫—ñ—Å—Ç—å.

---

## –ß–∞—Å—Ç–∏–Ω–∞ 2: Dynamic Array (`std::vector`)

[cite_start]–¶–µ –∞–Ω–∞–ª–æ–≥ `ArrayList` —É Java[cite: 4].
**–°—É—Ç—å:** –°—É—Ü—ñ–ª—å–Ω–∏–π –±–ª–æ–∫ –ø–∞–º'—è—Ç—ñ. –Ø–∫—â–æ –º—ñ—Å—Ü–µ –∑–∞–∫—ñ–Ω—á–∏–ª–æ—Å—å ‚Äî –≤–∏–¥—ñ–ª—è—î–º–æ –Ω–æ–≤–∏–π –±–ª–æ–∫ (x2), –∫–æ–ø—ñ—é—î–º–æ –≤—Å–µ —Ç—É–¥–∏, —Å—Ç–∞—Ä–∏–π –≤–∏–¥–∞–ª—è—î–º–æ.

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
* **Pros:** **Cache Friendly:** –í—Å—ñ –¥–∞–Ω—ñ –ª–µ–∂–∞—Ç—å –ø–æ—Ä—É—á. –ü—Ä–æ—Ü–µ—Å–æ—Ä "–∫–æ–≤—Ç–∞—î" —ó—Ö –ø–∞—á–∫–∞–º–∏ (Cache Lines).
* **Pros:** **Random Access:** `vec[500]` ‚Äî —Ü–µ –º–∏—Ç—Ç—î–≤–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∞–¥—Ä–µ—Å–∏ ($Base + 500 \cdot Size$). $O(1)$.

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
* **Cons:** **Insert/Delete in middle:** –¢—Ä–µ–±–∞ –∑—Å—É–≤–∞—Ç–∏ —Ö–≤—ñ—Å—Ç. [cite_start]$O(N)$[cite: 4].
* **Cons:** **Reallocation:** –ü–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ –¥–æ—Ä–æ–≥—ñ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø—Ä–∏ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—ñ.

---

## –ß–∞—Å—Ç–∏–Ω–∞ 3: Linked List (`std::list`)

[cite_start]–¶–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –¥–≤–æ–∑–≤'—è–∑–Ω–∏–π —Å–ø–∏—Å–æ–∫ (Double Linked List)[cite: 4].
**–°—É—Ç—å:** –ö–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç ‚Äî —Ü–µ –æ–∫—Ä–µ–º–∏–π –æ–±'—î–∫—Ç (Node) —É –∫—É–ø—ñ (Heap), —è–∫–∏–π –∑–Ω–∞—î, —Ö—Ç–æ –π–æ–≥–æ —Å—É—Å—ñ–¥–∏.



```cpp
struct Node {
    int value;
    Node* next; // +8 –±–∞–π—Ç
    Node* prev; // +8 –±–∞–π—Ç
};

```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**

* **Pros:** **Insert/Delete in middle:** –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–∏–Ω—É—Ç–∏ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∏.  (—è–∫—â–æ —É –≤–∞—Å –≤–∂–µ —î —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –ø–æ–∑–∏—Ü—ñ—é).


* **Pros:** **No Reallocation:** –í–∫–∞–∑—ñ–≤–Ω–∏–∫–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤–∞–ª—ñ–¥–Ω–∏–º–∏ –∑–∞–≤–∂–¥–∏.

**–ù–µ–¥–æ–ª—ñ–∫–∏:**

* **Cons:** **Cache Killer:** –í—É–∑–ª–∏ —Ä–æ–∑–∫–∏–¥–∞–Ω—ñ –ø–æ –ø–∞–º'—è—Ç—ñ —Ö–∞–æ—Ç–∏—á–Ω–æ. –ö–æ–∂–µ–Ω –ø–µ—Ä–µ—Ö—ñ–¥ `node->next` ‚Äî —Ü–µ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π Cache Miss.
* **Cons:** **No Random Access:** –©–æ–± –¥—ñ—Å—Ç–∞—Ç–∏ 500-–π –µ–ª–µ–º–µ–Ω—Ç, —Ç—Ä–µ–±–∞ –ø—Ä–æ–π—Ç–∏ 499 –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö. .


* **Cons:** **Memory Overhead:** –ü–ª–∞—Ç–∏–º–æ –∑–∞ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∏ (x3 –ø–∞–º'—è—Ç—ñ –¥–ª—è `int`).

---

## –ß–∞—Å—Ç–∏–Ω–∞ 4: –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –°–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ (Cheat Sheet)

–ù–∞ –æ—Å–Ω–æ–≤—ñ –≤–∞—à–æ–≥–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—É:

| –û–ø–µ—Ä–∞—Ü—ñ—è | Vector (`std::vector`) | List (`std::list`) |
| --- | --- | --- |
| **Access `[i]**` | **** (–ú–∏—Ç—Ç—î–≤–æ) |  (–î—É–∂–µ –¥–æ–≤–≥–æ) |
| **Insert Head** |  (–ó—Å—É–≤) | **** |
| **Insert Tail** |  (Amortized) | **** |
| **Insert Middle** |  | **** (—è–∫—â–æ —î —ñ—Ç–µ—Ä–∞—Ç–æ—Ä) |
| **Cache** | üî• Hot | üßä Cold |

---

## –ß–∞—Å—Ç–∏–Ω–∞ 5: –í–µ—Ä–¥–∏–∫—Ç –ë'—è—Ä–Ω–∞ –°—Ç—Ä–∞—É—Å—Ç—Ä—É–ø–∞

–°–∞–º —Ç–≤–æ—Ä–µ—Ü—å C++ –ø—Ä–æ–≤–æ–¥–∏–≤ —Ç–µ—Å—Ç: –≥–µ–Ω–µ—Ä—É–≤–∞–≤ –≤–∏–ø–∞–¥–∫–æ–≤—ñ —á–∏—Å–ª–∞ —ñ –≤—Å—Ç–∞–≤–ª—è–≤ —ó—Ö —É –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫/–≤–µ–∫—Ç–æ—Ä.
–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–æ `list` –º–∞–≤ –≤–∏–≥—Ä–∞—Ç–∏ (–≤—Å—Ç–∞–≤–∫–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω—É).
–ü—Ä–∞–∫—Ç–∏—á–Ω–æ **`vector` –ø–µ—Ä–µ–º—ñ–≥**, –Ω–∞–≤—ñ—Ç—å –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∑—Å—É–≤—ñ–≤.

**–ß–æ–º—É?**
–ü–æ–∫–∏ `list` —à—É–∫–∞—î –º—ñ—Å—Ü–µ –≤ –ø–∞–º'—è—Ç—ñ (—Å—Ç—Ä–∏–±–∞—î –ø–æ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∞—Ö), `vector` –≤—Å—Ç–∏–≥–∞—î –∑—Å—É–Ω—É—Ç–∏ –º–µ–≥–∞–±–∞–π—Ç –¥–∞–Ω–∏—Ö –∑–∞–≤–¥—è–∫–∏ –∫–µ—à—É —Ç–∞ SIMD-—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞.

---

## –î–æ–¥–∞—Ç–æ–∫: Circular Queue (Ring Buffer)

> **üí° Visual Schema from Source Material**  
> [PDF_REF: Stacks&Queues.pdf]

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞—ó–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–≥–∏ –Ω–∞ –º–∞—Å–∏–≤—ñ –º–∞—Ä–Ω—É—î –ø—Ä–æ—Å—Ç—ñ—Ä.

**–ù–∞—ó–≤–Ω–∞ —á–µ—Ä–≥–∞:**
```
[  ][  ][A][B][C][ ][ ]
        ‚Üë       ‚Üë
      front    rear
```

–ü—ñ—Å–ª—è `dequeue()` –¥–≤—ñ—á—ñ:
```
[  ][  ][  ][  ][C][ ][ ]
                ‚Üë   ‚Üë
              front rear
```

–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä–æ—Å—Ç—ñ—Ä (`[0], [1]`) –≤—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞–∑–∞–≤–∂–¥–∏! Rear –º–æ–∂–µ –¥—ñ–π—Ç–∏ –¥–æ –∫—ñ–Ω—Ü—è –º–∞—Å–∏–≤—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —î –≤—ñ–ª—å–Ω–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä –Ω–∞ –ø–æ—á–∞—Ç–∫—É.

**–†—ñ—à–µ–Ω–Ω—è: Circular Queue (Ring Buffer)**

–£—è–≤–ª—è—î–º–æ –º–∞—Å–∏–≤ —è–∫ **–∫—ñ–ª—å—Ü–µ** (wheel). –Ü–Ω–¥–µ–∫—Å–∏ "–∑–∞—Ü–∏–∫–ª—é—é—Ç—å—Å—è" —á–µ—Ä–µ–∑ –º–æ–¥—É–ª–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É:

```
–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∫—ñ–ª—å—Ü—è:
   
      [0]
   [6]   [1]
[5]   ‚ö´   [2]
   [4]   [3]
   
front = 2, rear = 5
–ï–ª–µ–º–µ–Ω—Ç–∏: [2], [3], [4], [5]

–ü—ñ—Å–ª—è enqueue(X):
rear = (rear + 1) % 7 = 6
```

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**

```cpp
class CircularQueue {
    int* data;
    int front, rear, size, capacity;
    
public:
    CircularQueue(int cap) {
        capacity = cap;
        data = new int[capacity];
        front = rear = -1;
        size = 0;
    }
    
    bool enqueue(int value) {
        if (size == capacity) return false;  // Full
        
        if (front == -1) front = 0;  // First element
        
        rear = (rear + 1) % capacity;  // ‚≠ê Wrap around!
        data[rear] = value;
        size++;
        return true;
    }
    
    int dequeue() {
        if (size == 0) return -1;  // Empty
        
        int value = data[front];
        front = (front + 1) % capacity;  // ‚≠ê Wrap around!
        size--;
        
        if (size == 0) {  // Queue became empty
            front = rear = -1;
        }
        
        return value;
    }
};
```

**Index Wrapping Math:**
- `(rear + 1) % capacity` ‚Äî –Ω–∞—Å—Ç—É–ø–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –ø—ñ—Å–ª—è `rear`
- –Ø–∫—â–æ `rear = 6` —ñ `capacity = 7`, —Ç–æ `(6 + 1) % 7 = 0` (–ø–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—è –Ω–∞ –ø–æ—á–∞—Ç–æ–∫)

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- Audio/Video buffers (streaming)
- Producer-Consumer patterns
- Kernel ring buffers (Linux `dmesg`)

**–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:**
- **Space:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è 100% –º–∞—Å–∏–≤—É (–Ω–µ–º–∞—î –≤—Ç—Ä–∞—á–µ–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É)
- **Time:** O(1) –¥–ª—è enqueue/dequeue

> **Engineering Rule:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `std::vector` —è–∫ –æ—Å–Ω–æ–≤—É, –∞–ª–µ —è–∫—â–æ queue pattern —Ç—Ä–µ–±–∞ —á–∞—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è—Ç–∏ —ñ –≤–∏–¥–∞–ª—è—Ç–∏ –∑ –æ–±–æ—Ö –∫—ñ–Ω—Ü—ñ–≤ ‚Üí circular buffer –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–π –∑–∞ naive queue

> **Engineering Rule:** –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `std::vector`.
> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `std::list`, –¢–Ü–õ–¨–ö–ò —è–∫—â–æ –≤–∞–º —Ç—Ä–µ–±–∞ —á–∞—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ —Å–µ—Ä–µ–¥–∏–Ω–∏ –Ü –≤–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –ø–æ —Å–ø–∏—Å–∫—É —á–∞—Å—Ç–æ.

---

---

## –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è

**–î–∏–≤.:** [–ü—Ä–∞–∫—Ç–∏–∫—É–º 13: Algorithms & Good Taste](p13_algorithms_and_taste.md) ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º—ñ—á–Ω–∏–π –¥–∏–∑–∞–π–Ω —Ç–∞ —Ä–æ–±–æ—Ç–∞ –∑—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–∏—Ö.

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

1. –£ –≤–∞—Å —î —Å–ø–∏—Å–æ–∫ –∑ 1 –º–ª–Ω –∫—É–ª—å (–æ–±'—î–∫—Ç—ñ–≤ –≥—Ä–∏). –í–∞–º —Ç—Ä–µ–±–∞ –∫–æ–∂–µ–Ω –∫–∞–¥—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –ø–æ –≤—Å—ñ–º —ñ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —ó—Ö –ø–æ–∑–∏—Ü—ñ—é. –©–æ –≤–∏ –æ–±–µ—Ä–µ—Ç–µ: `vector` —á–∏ `list`?
2. –ß–æ–º—É `std::vector::push_back` –Ω–∞–∑–∏–≤–∞—é—Ç—å "–∞–º–æ—Ä—Ç–∏–∑–æ–≤–∞–Ω–∏–º "?
3. –Ø–∫ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ `vector` –Ω–∞ "C-style array" (–≤–∫–∞–∑—ñ–≤–Ω–∏–∫ –Ω–∞ –ø–µ—Ä—à–∏–π –µ–ª–µ–º–µ–Ω—Ç)? (–ü—ñ–¥–∫–∞–∑–∫–∞: `vec.data()`).

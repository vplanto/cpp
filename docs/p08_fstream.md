# –ü—Ä–∞–∫—Ç–∏–∫—É–º 8: –§–∞–π–ª–æ–≤—ñ –ø–æ—Ç–æ–∫–∏ (`fstream`) ‚Äî –°—Ç–≤–æ—Ä—é—î–º–æ "Save Game"

## üéØ –ù–∞—à "–ø—Ä–æ–¥—É–∫—Ç" —Å—å–æ–≥–æ–¥–Ω—ñ

–ù–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ "–ú–µ–Ω–µ–¥–∂–µ—Ä –ü–∞—Ç—ñ" –∑ –º–∏–Ω—É–ª–æ–≥–æ —Ä–∞–∑—É –º–∞—î —Ñ–∞—Ç–∞–ª—å–Ω—É –≤–∞–¥—É: —â–æ–π–Ω–æ –º–∏ —ó—ó –∑–∞–∫—Ä–∏–≤–∞—î–º–æ, –≤—Å—è –Ω–∞—à–∞ –≥—Ä—É–ø–∞ (`Player* party`) –∑–Ω–∏–∫–∞—î. –î–∞–Ω—ñ, —â–æ –∂–∏–≤—É—Ç—å –≤ RAM (—Å—Ç–µ–∫/–∫—É–ø–∞), ‚Äî —Ç–∏–º—á–∞—Å–æ–≤—ñ.

**–ó–∞–¥–∞—á–∞:** –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç—Ä–∏ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–æ–º `party.sav`:

1.  **"Save Game" (–ó–∞–ø–∏—Å):** –í–∑—è—Ç–∏ –Ω–∞—à –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π –º–∞—Å–∏–≤ `Player` —ñ –∑–±–µ—Ä–µ–≥—Ç–∏ –π–æ–≥–æ —É —Ñ–∞–π–ª (`ofstream`).
2.  **"Load Game" (–ß–∏—Ç–∞–Ω–Ω—è):** –ó—á–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ –∑ `party.sav` —ñ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –≥—Ä–∏ (`ifstream`).
3.  **"File Inspector" (–ú–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—è):** –£—Ç–∏–ª—ñ—Ç–∞, —è–∫–∞ **–Ω–µ —á–∏—Ç–∞—é—á–∏ –≤–µ—Å—å —Ñ–∞–π–ª**, –º–æ–∂–µ –º–∏—Ç—Ç—î–≤–æ —Å–∫–∞–∑–∞—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ –≤ –Ω—å–æ–º—É –±–∞–π—Ç (—Ä–æ–∑–º—ñ—Ä). –¶–µ —ñ —î **–º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—è –ø–æ—Ç–æ–∫–æ–º** (`seekg`, `tellg`).

## üèÅ –ï–∫—Å–ø—Ä–µ—Å-–æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è

–¶–µ–π –ø—Ä–∞–∫—Ç–∏–∫—É–º –æ–±'—î–¥–Ω—É—î –õ–µ–∫—Ü—ñ—ó 8, 10 —Ç–∞ 11.

1.  –Ø–∫ –º–∏ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∏ –º–∞—Å–∏–≤ `Player`, —Ä–æ–∑–º—ñ—Ä —è–∫–æ–≥–æ `n` –≤–≤–æ–¥–∏–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á?
2.  –Ø–∫–æ—é –∫–æ–º–∞–Ω–¥–æ—é –º–∏ –∑–≤—ñ–ª—å–Ω—è–ª–∏ –ø–∞–º'—è—Ç—å, –≤–∏–¥—ñ–ª–µ–Ω—É –¥–ª—è `Player* party`?
3.  –Ø–∫–∏–π –æ–±'—î–∫—Ç –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –¥–ª—è –≤–∏–≤–æ–¥—É –≤ –∫–æ–Ω—Å–æ–ª—å? –ê –¥–ª—è –≤–≤–æ–¥—É –∑ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏?
4.  –£ —á–æ–º—É, –Ω–∞ –≤–∞—à—É –¥—É–º–∫—É, —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `cout` —Ç–∞ `ofstream`?

<details markdown="1">
<summary>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</summary>

1.  –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è: `Player* party = new Player[n];`.
2.  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `delete[] party;`.
3.  –í–∏–≤—ñ–¥: `std::cout`. –í–≤—ñ–¥: `std::cin`.
4.  –ú–∞–π–∂–µ –Ω—ñ—è–∫–æ—ó\! –û–±–∏–¥–≤–∞ —î "–ø–æ—Ç–æ–∫–∞–º–∏ –≤–∏–≤–æ–¥—É". –¢—ñ–ª—å–∫–∏ `cout` "–ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π" –¥–æ –∫–æ–Ω—Å–æ–ª—ñ, –∞ `ofstream` –º–∏ "–ø—ñ–¥–∫–ª—é—á–∏–º–æ" –¥–æ —Ñ–∞–π–ª—É. –°–∏–Ω—Ç–∞–∫—Å–∏—Å `<<` –±—É–¥–µ –æ–¥–Ω–∞–∫–æ–≤–∏–π.

</details>

-----

## –ß–∞—Å—Ç–∏–Ω–∞ 1: –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≥—Ä—É (`ofstream`)

–°–ø–æ—á–∞—Ç–∫—É –Ω–∞–ø–∏—à–µ–º–æ "—É—Ç–∏–ª—ñ—Ç—É 1". –í–æ–Ω–∞ –≤—ñ–∑—å–º–µ –¥–∞–Ω—ñ —ñ –∑–∞–ø–∏—à–µ —ó—Ö —É —Ñ–∞–π–ª.

**–ö–ª—é—á–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:**

  * `#include <fstream>`
  * `std::ofstream` (output file stream)
  * `file.open("—ñ–º'—è —Ñ–∞–π–ª—É")`
  * `file.close()`

<details markdown="1";>
<summary>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –∫–æ–¥ "Save Game"</summary>

```cpp
#include <iostream>
#include <fstream> // –û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–∞–º–∏
#include <string>

struct Player {
    std::string name;
    std::string className;
    int level;
};

int main() {
    // –ù–∞—à—ñ –¥–∞–Ω—ñ, —è–∫—ñ –º–∏ —Ö–æ—á–µ–º–æ –∑–±–µ—Ä–µ–≥—Ç–∏
    Player party[2];
    party[0] = {"Ghost", "Recon", 10};
    party[1] = {"Soap", "Assault", 9};

    // 1. –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç –ø–æ—Ç–æ–∫—É –≤–∏–≤–æ–¥—É
    std::ofstream saveFile;

    // 2. –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª. 
    // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —Ñ–∞–π–ª –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –≤ —Ä–µ–∂–∏–º—ñ ios::out | ios::trunc
    // ios::trunc –û–ó–ù–ê–ß–ê–Ñ: "–Ø–∫—â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î, –°–¢–ï–†–¢–ò –í–ï–°–¨ –ô–û–ì–û –í–ú–Ü–°–¢"
    saveFile.open("party.sav");

    // 3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Ñ–∞–π–ª –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–∏
    if (!saveFile.is_open()) {
        std::cerr << "–ü–û–ú–ò–õ–ö–ê: –ù–µ–º–æ–∂–ª–∏–≤–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å—É!" << std::endl;
        return 1;
    }

    std::cout << "–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≥—Ä–∏..." << std::endl;

    // 4. –ó–∞–ø–∏—Å—É—î–º–æ –¥–∞–Ω—ñ —É —Ñ–∞–π–ª - —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, —è–∫ —É `cout`!
    // –ú–∏ –±—É–¥–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π CSV-–ø–æ–¥—ñ–±–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç: name,class,level
    for (int i = 0; i < 2; ++i) {
        saveFile << party[i].name << "," 
                 << party[i].className << "," 
                 << party[i].level << "\n"; // '\n' –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞
    }

    // 5. –ó–∞–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª
    // –¶–µ –û–ë–û–í'–Ø–ó–ö–û–í–û. –¶—è –∫–æ–º–∞–Ω–¥–∞ "–∑–º–∏–≤–∞—î" –±—É—Ñ–µ—Ä
    // —ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –û–°, —â–æ –º–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ä–æ–±–æ—Ç—É –∑ —Ñ–∞–π–ª–æ–º.
    saveFile.close();

    std::cout << "–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ." << std::endl;
    return 0;
}
```

</details>

-----

## –ß–∞—Å—Ç–∏–Ω–∞ 2: –î–æ–¥–∞—î–º–æ –≥—Ä–∞–≤—Ü—è (`ios::app`)

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ø–∫—â–æ –º–∏ –∑–∞–ø—É—Å—Ç–∏–º–æ –∫–æ–¥ –≤–∏—â–µ –≤–¥—Ä—É–≥–µ, –≤—ñ–Ω **–ø–µ—Ä–µ–∑–∞–ø–∏—à–µ** –Ω–∞—à —Ñ–∞–π–ª. –Ø–∫ –Ω–∞–º *–¥–æ–¥–∞—Ç–∏* –Ω–æ–≤–æ–≥–æ –≥—Ä–∞–≤—Ü—è –≤ –∫—ñ–Ω–µ—Ü—å —Ñ–∞–π–ª—É?

**–†—ñ—à–µ–Ω–Ω—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ä–µ–∂–∏–º **`ios::app` (append)**.

```cpp
// –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª —É —Ä–µ–∂–∏–º—ñ "–¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤ –∫—ñ–Ω–µ—Ü—å"
saveFile.open("party.sav", std::ios::app); 
```

### ‚ùì –ü–∏—Ç–∞–Ω–Ω—è –¥–æ –≥—Ä—É–ø–∏ (–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è)

–£ —Ñ–∞–π–ª—ñ `WriteStreamExt.cpp` —î –¥–∏–≤–Ω–∏–π `sleep(60)`. –£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –∫–æ–¥, —è–∫–∏–π –ø–∏—à–µ —É —Ñ–∞–π–ª 1000 —Ä—è–¥–∫—ñ–≤, –∞ –ø–æ—Ç—ñ–º "–∑–∞–≤–∏—Å–∞—î" –Ω–∞ `sleep(60)`. –Ø–∫—â–æ –≤–∏ –≤—ñ–¥–∫—Ä–∏—î—Ç–µ —Ñ–∞–π–ª —É –ë–ª–æ–∫–Ω–æ—Ç—ñ *–ø—ñ–¥ —á–∞—Å* `sleep`, —â–æ –≤–∏ —Ç–∞–º –ø–æ–±–∞—á–∏—Ç–µ?

<details markdown="1" open>
<summary>–ú—ñ—Ä–∫—É—î–º–æ —Ä–∞–∑–æ–º (–õ–æ–≥—ñ–∫–∞ –∑ `WriteStreamExt.cpp`)</summary>

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:** –í–∏ –Ω–µ –ø–æ–±–∞—á–∏—Ç–µ **–Ω—ñ—á–æ–≥–æ**. –§–∞–π–ª –±—É–¥–µ –ø–æ—Ä–æ–∂–Ω—ñ–º.

**–ß–æ–º—É?** –ó–∞–ø–∏—Å –Ω–∞ –¥–∏—Å–∫ ‚Äî —Ü–µ *–ø–æ–≤—ñ–ª—å–Ω–æ*. C++ –Ω–µ –∑–∞–ø–∏—Å—É—î –∫–æ–∂–µ–Ω —Å–∏–º–≤–æ–ª –æ–¥—Ä–∞–∑—É. –í—ñ–Ω –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ —É —Ç–∏–º—á–∞—Å–æ–≤—ñ–π –ø–∞–º'—è—Ç—ñ ‚Äî **–±—É—Ñ–µ—Ä—ñ** (`streambuf`). –î–∞–Ω—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å –Ω–∞ –¥–∏—Å–∫ (–ø—Ä–æ—Ü–µ—Å –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è `flush` –∞–±–æ "—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è"), –ª–∏—à–µ –∫–æ–ª–∏:

1.  –ë—É—Ñ–µ—Ä –∑–∞–ø–æ–≤–Ω–∏—Ç—å—Å—è.
2.  –í–∏ *—è–≤–Ω–æ* –≤–∏–∫–ª–∏—á–µ—Ç–µ `file.flush()`.
3.  –í–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î—Ç–µ `std::endl` (—è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î `flush`).
4.  –í–∏ –≤–∏–∫–ª–∏—á–µ—Ç–µ `file.close()` (—è–∫–∏–π —Ç–µ–∂ –≤–∏–∫–ª–∏–∫–∞—î `flush`).

–ö–æ–¥ —É `WriteStreamExt.cpp` "–∑–∞–≤–∏—Å–∞—î" *–¥–æ* –≤–∏–∫–ª–∏–∫—É `close()`, —Ç–æ–º—É –¥–∞–Ω—ñ "—Å–∏–¥—è—Ç—å" —É –±—É—Ñ–µ—Ä—ñ –≤ RAM. –¶–µ –ø–æ–∫–∞–∑—É—î, —á–æ–º—É –≤–∞–∂–ª–∏–≤–æ –∑–∞–≤–∂–¥–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏. 

</details>

-----

## –ß–∞—Å—Ç–∏–Ω–∞ 3: –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –≥—Ä—É (`ifstream` —Ç–∞ `stringstream`)

–¢–µ–ø–µ—Ä –Ω–∞–ø–∏—à–µ–º–æ "—É—Ç–∏–ª—ñ—Ç—É 2" ‚Äî –∑—á–∏—Ç—É–≤–∞—á. –í–æ–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î –ª–æ–≥—ñ–∫—É –∑ `ReadStream.cpp` —Ç–∞ `WordCounter.cpp`.

**–ö–ª—é—á–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:**

  * `std::ifstream` (input file stream)
  * `while (std::getline(file, line))` ‚Äî –Ω–∞–π–∫—Ä–∞—â–∏–π —Å–ø–æ—Å—ñ–± —á–∏—Ç–∞—Ç–∏ —Ñ–∞–π–ª –ø–æ —Ä—è–¥–∫–∞—Ö.
  * `std::stringstream` ‚Äî –¥–ª—è "–ø–∞—Ä—Å–∏–Ω–≥—É" —Ä—è–¥–∫–∞, —è–∫–∏–π –º–∏ –∑—á–∏—Ç–∞–ª–∏.

<details markdown="1" open>
<summary>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –∫–æ–¥ "Load Game"</summary>

```cpp
#include <iostream>
#include <fstream>
#include <string>
#include <sstream> // –ü–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É —Ä—è–¥–∫–∞

struct Player {
    std::string name;
    std::string className;
    int level;
};

int main() {
    // 1. –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç –≤—Ö—ñ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É
    std::ifstream loadFile("party.sav");

    // 2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Ñ–∞–π–ª —ñ—Å–Ω—É—î —ñ —á–∏ –º–∏ –º–æ–∂–µ–º–æ –π–æ–≥–æ —á–∏—Ç–∞—Ç–∏
    if (!loadFile.is_open()) {
        std::cerr << "–ü–û–ú–ò–õ–ö–ê: –§–∞–π–ª –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è 'party.sav' –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!" << std::endl;
        return 1;
    }

    std::cout << "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥—Ä–∏..." << std::endl;
    std::string line;

    // 3. –ù–∞–π–∫—Ä–∞—â–∏–π —Å–ø–æ—Å—ñ–± —á–∏—Ç–∞—Ç–∏ —Ñ–∞–π–ª –ø–æ —Ä—è–¥–∫–∞—Ö:
    // (–õ–æ–≥—ñ–∫–∞ –∑ ReadStream.cpp)
    // getline() –∑—á–∏—Ç—É—î —Ä—è–¥–æ–∫ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î 'true',
    // –ø–æ–∫–∏ –Ω–µ –¥—ñ–π–¥–µ –¥–æ –∫—ñ–Ω—Ü—è —Ñ–∞–π–ª—É (EOF).
    while (std::getline(loadFile, line)) {
        
        // 4. "–ü–∞—Ä—Å–∏–º–æ" –∑—á–∏—Ç–∞–Ω–∏–π —Ä—è–¥–æ–∫ (–Ω–∞–ø—Ä., "Ghost,Recon,10")
        std::stringstream ss(line);
        std::string tempField; // –¢–∏–º—á–∞—Å–æ–≤–∞ –∑–º—ñ–Ω–Ω–∞ –¥–ª—è –ø–æ–ª—ñ–≤
        Player p;

        // –í–∏—Ç—è–≥—É—î–º–æ –¥–∞–Ω—ñ, —Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ –∫–æ–º–æ—é
        std::getline(ss, p.name, ',');
        std::getline(ss, p.className, ',');
        
        std::getline(ss, tempField, ','); // –ó—á–∏—Ç—É—î–º–æ —Ä—ñ–≤–µ–Ω—å (—è–∫–∏–π —î —Ç–µ–∫—Å—Ç–æ–º)
        p.level = std::stoi(tempField); // stoi = "string to integer"

        // –í–∏–≤–æ–¥–∏–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –¥–∞–Ω—ñ
        std::cout << "  > –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: " << p.name 
                  << " (–ö–ª–∞—Å: " << p.className 
                  << ", –†—ñ–≤–µ–Ω—å: " << p.level << ")" << std::endl;
    }

    // 5. –ó–∞–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª
    loadFile.close();
    return 0;
}
```

</details>

### ‚ùì –ü–∏—Ç–∞–Ω–Ω—è –¥–æ –≥—Ä—É–ø–∏ (–ü–∞—Å—Ç–∫–∞ `eof()`)

–£ —Ñ–∞–π–ª—ñ `ReadStreamExt.cpp` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ü–∏–∫–ª `while (!file.eof())`. –¶–µ –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –Ω–æ–≤–∞—á–∫—ñ–≤. –ß–æ–º—É —Ü–µ–π –∫–æ–¥ –≥—ñ—Ä—à–∏–π, –Ω—ñ–∂ –Ω–∞—à `while (getline(..))`?

<details markdown="1" open>
<summary>–ú—ñ—Ä–∫—É—î–º–æ —Ä–∞–∑–æ–º...</summary>
–ü—Ä–∞–ø–æ—Ä `eof()` (End of File) —Å—Ç–∞—î `true` **—Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è** —Ç–æ–≥–æ, —è–∫ –º–∏ —Å–ø—Ä–æ–±—É—î–º–æ –∑—á–∏—Ç–∞—Ç–∏ —â–æ—Å—å *–∑–∞* –∫—ñ–Ω—Ü–µ–º —Ñ–∞–π–ª—É.

–ü—Ä–∏ `while (!file.eof())`:

1.  –ú–∏ –∑—á–∏—Ç—É—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫. `eof()` –≤—Å–µ —â–µ `false`.
2.  –¶–∏–∫–ª –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑–Ω–æ–≤—É.
3.  `getline()` –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑—á–∏—Ç–∞—Ç–∏, –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `eof()`), **–∞–ª–µ `line` –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è**.
4.  –¶–∏–∫–ª **–≤–∏–≤–æ–¥–∏—Ç—å –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫ –î–í–Ü–ß–Ü**.

–¶–∏–∫–ª `while (getline(file, line))` ‚Äî —ñ–¥–µ–∞–ª—å–Ω–∏–π. –í—ñ–Ω —á–∏—Ç–∞—î *—ñ* –ø–µ—Ä–µ–≤—ñ—Ä—è—î —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –≤ –æ–¥–Ω—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó.

</details>

-----

## –ß–∞—Å—Ç–∏–Ω–∞ 4: –ú–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—è –ø–æ—Ç–æ–∫–æ–º (`seekg`, `tellg`)

–¶–µ **–æ–±–æ–≤'—è–∑–∫–æ–≤–∞** —á–∞—Å—Ç–∏–Ω–∞. –ù–∞—à–∞ "–£—Ç–∏–ª—ñ—Ç–∞ 3" ("File Inspector") –ø–æ–≤–∏–Ω–Ω–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É, –Ω–µ —á–∏—Ç–∞—é—á–∏ –π–æ–≥–æ.

**–ö–ª—é—á–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:**

  * **–ö—É—Ä—Å–æ—Ä–∏:** –£—è–≤—ñ—Ç—å, —â–æ —É —Ñ–∞–π–ª—ñ —î –¥–≤–∞ –∫—É—Ä—Å–æ—Ä–∏: `get` (–¥–µ –º–∏ —á–∏—Ç–∞—î–º–æ) —ñ `put` (–¥–µ –º–∏ –ø–∏—à–µ–º–æ).
  * `seekg()` (seek get): **–ü–µ—Ä–µ–º—ñ—â—É—î** –∫—É—Ä—Å–æ—Ä —á–∏—Ç–∞–Ω–Ω—è.
  * `tellg()` (tell get): **–ü–æ–≤—ñ–¥–æ–º–ª—è—î**, –¥–µ –∑–∞—Ä–∞–∑ –∫—É—Ä—Å–æ—Ä —á–∏—Ç–∞–Ω–Ω—è.
  * **–†–µ–∂–∏–º–∏:** `ios::beg` (–ø–æ—á–∞—Ç–æ–∫), `ios::cur` (–ø–æ—Ç–æ—á–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è), `ios::end` (–∫—ñ–Ω–µ—Ü—å).

<details markdown="1" open>
<summary>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –∫–æ–¥ "File Inspector" (–∑ `FileSize.cpp`)</summary>

```cpp
#include <iostream>
#include <fstream>

int main() {
    // 1. –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª —É –±—ñ–Ω–∞—Ä–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ,
    //    —â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Ö—É–≤–∞—Ç–∏ –±–∞–π—Ç–∏
    std::ifstream file("party.sav", std::ios::binary);
    if (!file) {
        std::cerr << "–ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª." << std::endl;
        return 1;
    }

    // 2. –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤—É –ø–æ–∑–∏—Ü—ñ—é (–∑–∞–∑–≤–∏—á–∞–π 0)
    std::streampos begin = file.tellg();

    // 3. –ü–µ—Ä–µ–º—ñ—â—É—î–º–æ 'get' –∫—É—Ä—Å–æ—Ä –Ω–∞ 0 –±–∞–π—Ç
    //    –≤—ñ–¥–Ω–æ—Å–Ω–æ –∫—ñ–Ω—Ü—è —Ñ–∞–π–ª—É (ios::end)
    file.seekg(0, std::ios::end);

    // 4. –û—Ç—Ä–∏–º—É—î–º–æ –∫—ñ–Ω—Ü–µ–≤—É –ø–æ–∑–∏—Ü—ñ—é
    std::streampos end = file.tellg();

    file.close();

    // 5. –†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É - —Ü–µ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –∫—ñ–Ω—Ü–µ–º —ñ –ø–æ—á–∞—Ç–∫–æ–º
    std::cout << "–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É: " << (end - begin) << " –±–∞–π—Ç." << std::endl;
    
    return 0;
}
```

</details>

-----

## –ß–∞—Å—Ç–∏–Ω–∞ 5: –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (–ü—Ä–∞–ø–æ—Ä–∏ —Å—Ç–∞–Ω—É)

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ —Ñ–∞–π–ª –ø–æ—à–∫–æ–¥–∂–µ–Ω–æ, –∞–±–æ –¥–∏—Å–∫ –∑–∞–ø–æ–≤–Ω–∏–≤—Å—è –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Å—É? –ù–∞—à –ø–æ—Ç—ñ–∫ "–∑–ª–∞–º–∞—î—Ç—å—Å—è".

**–ö–ª—é—á–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏** (–∑ `FileFlags.cpp`):

  * `file.good()`: `true`, —è–∫—â–æ –≤—Å–µ –û–ö.
  * `file.fail()`: `true`, —è–∫—â–æ —Å—Ç–∞–ª–∞—Å—è –ª–æ–≥—ñ—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞ (–Ω–∞–ø—Ä., –º–∏ –Ω–∞–º–∞–≥–∞–ª–∏—Å—è –∑—á–∏—Ç–∞—Ç–∏ "abc" –≤ `int`).
  * `file.bad()`: `true`, —è–∫—â–æ —Å—Ç–∞–ª–∞—Å—è —Å–µ—Ä–π–æ–∑–Ω–∞, –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–∞ –ø–æ–º–∏–ª–∫–∞ (–Ω–∞–ø—Ä., –¥–∏—Å–∫ –≤—ñ–¥–∫–ª—é—á–∏–≤—Å—è).
  * `file.eof()`: `true`, —è–∫—â–æ –¥–æ—Å—è–≥–Ω—É—Ç–æ –∫—ñ–Ω—Ü—è —Ñ–∞–π–ª—É.
  * `file.clear()`: –°–∫–∏–¥–∞—î –ø—Ä–∞–ø–æ—Ä–∏ –ø–æ–º–∏–ª–æ–∫ (–Ω–∞–ø—Ä., `fail`), —â–æ–± –º–∏ –º–æ–≥–ª–∏ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä–æ–±–æ—Ç—É.

-----

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

1.  **–ó–∞–ø–∏—Å.** –í–∏ —Ö–æ—á–µ—Ç–µ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∫–æ—Ä–¥ –≥—Ä–∞–≤—Ü—è, –∞–ª–µ –Ω–µ —Ö–æ—á–µ—Ç–µ **—Å—Ç–∏—Ä–∞—Ç–∏** –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ä–µ–∫–æ—Ä–¥–∏. –Ø–∫–∏–π *–¥—Ä—É–≥–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä* (—Ä–µ–∂–∏–º) –≤–∏ –º–∞—î—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ —É `file.open()`?
2.  **–ß–∏—Ç–∞–Ω–Ω—è.** –ß–æ–º—É —Ü–∏–∫–ª `while (std::getline(file, line))` –≤–≤–∞–∂–∞—î—Ç—å—Å—è –Ω–∞–±–∞–≥–∞—Ç–æ –∫—Ä–∞—â–∏–º —ñ –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–º, –Ω—ñ–∂ `while (!file.eof())`?
3.  **–ú–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—è.** –ù–∞–ø–∏—à—ñ—Ç—å **–¥–≤—ñ** –∫–æ–º–∞–Ω–¥–∏: –ø–µ—Ä—à–∞ –ø–µ—Ä–µ–º—ñ—â—É—î –∫—É—Ä—Å–æ—Ä —á–∏—Ç–∞–Ω–Ω—è —É —Ñ–∞–π–ª—ñ —Ç–æ—á–Ω–æ –Ω–∞ 10-–π –±–∞–π—Ç –≤—ñ–¥ **–ø–æ—á–∞—Ç–∫—É**, –∞ –¥—Ä—É–≥–∞ ‚Äî –Ω–∞ 5 –±–∞–π—Ç –Ω–∞–∑–∞–¥ –≤—ñ–¥ **–ø–æ—Ç–æ—á–Ω–æ—ó** –ø–æ–∑–∏—Ü—ñ—ó.
4.  **–ü—Ä–∞–ø–æ—Ä–∏.** –ü—ñ–¥ —á–∞—Å –∑—á–∏—Ç—É–≤–∞–Ω–Ω—è `file >> number;` –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ "text". –Ø–∫–∏–π –ø—Ä–∞–ø–æ—Ä —Å—Ç–∞–Ω—É (`bad`, `fail` —á–∏ `eof`) –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ?
5.  **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è.** –í–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ 10 —Ö–≤–∏–ª–∏–Ω –ø–∏—Å–∞–ª–∞ –¥–∞–Ω—ñ —É —Ñ–∞–π–ª, –∞–ª–µ —Ä–∞–ø—Ç–æ–≤–æ "–≤–ø–∞–ª–∞" (crashed), –Ω–µ –≤–∏–∫–æ–Ω–∞–≤—à–∏ `file.close()`. –í–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç–µ —Ñ–∞–π–ª —ñ –±–∞—á–∏—Ç–µ, —â–æ –≤—ñ–Ω –ø–æ—Ä–æ–∂–Ω—ñ–π. –ß–æ–º—É —Ç–∞–∫ —Å—Ç–∞–ª–æ—Å—è, —ñ —è–∫—ñ **–¥–≤—ñ** –∫–æ–º–∞–Ω–¥–∏ –º–æ–≥–ª–∏ –± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ —Ü—å–æ–º—É (—è–∫–±–∏ —ó—Ö –≤–∏–∫–ª–∏–∫–∞–ª–∏ *–¥–æ* –ø–∞–¥—ñ–Ω–Ω—è)?

<details markdown="1" open>
<summary>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</summary>

1.  –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `std::ios::app` (append): `saveFile.open("scores.txt", std::ios::app);`.
2.  –¢–æ–º—É —â–æ `!file.eof()` —Å—Ç–∞—î `false` *—Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è* –Ω–µ–≤–¥–∞–ª–æ—ó —Å–ø—Ä–æ–±–∏ —á–∏—Ç–∞–Ω–Ω—è. –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ —Ç–æ–≥–æ, —â–æ **–æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫ —Ñ–∞–π–ª—É –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –¥–≤—ñ—á—ñ**. `while (getline(..))` —á–∏—Ç–∞—î *—ñ* –ø–µ—Ä–µ–≤—ñ—Ä—è—î —É—Å–ø—ñ—Ö –≤ –æ–¥–Ω—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ —î –∫–æ—Ä–µ–∫—Ç–Ω–∏–º.
3.  `file.seekg(10, std::ios::beg);` —Ç–∞ `file.seekg(-5, std::ios::cur);` .
4.  –ë—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–ø–æ—Ä `file.fail()`, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –ø–æ–º–∏–ª–∫–∞ *—Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è* (—Ç–µ–∫—Å—Ç –Ω–µ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞ —á–∏—Å–ª–æ), –∞ –Ω–µ –ø–æ–≤–Ω–∞ –≤—ñ–¥–º–æ–≤–∞ –¥–∏—Å–∫–∞.
5.  **–ß–æ–º—É:** –î–∞–Ω—ñ –∑–Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å —É **–±—É—Ñ–µ—Ä—ñ** –≤ RAM —ñ –Ω–µ –±—É–ª–∏ "–∑–º–∏—Ç—ñ" (flushed) –Ω–∞ –¥–∏—Å–∫ . **–Ø–∫ –∑–∞–ø–æ–±—ñ–≥—Ç–∏:**
    1.  –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `file.flush();` 
    2.  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `std::endl` (—è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î `flush`) –∑–∞–º—ñ—Å—Ç—å `\n` (–∞–ª–µ —Ü–µ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ).

</details>